{% extends "base.html" %}
{% block content %}
	{% if object_list|length > 0 %}
	<div class="container-fluid">
		<div class="row">
			<form action="{% url 'product-list' %}" method="get" class="d-flex my-2">
				<input name="search" class="form-control me-2 " type="search" placeholder="Search" aria-label="Search" value="{{ request.GET.search }}">
				<button class="btn btn-outline-success search-button" type="submit">SEARCH</button>
			</form>
		</div>
		<div class="row">
	{% for product in object_list %}
		{% if product.active is True and product.quantity > 0 %}
			<div class="col-xs-12 col-sm-6 col-md-4 d-flex justify-content-center">
				<div class="card product-card">
					<div>
					<a href="{% url 'product-detail' pk=product.id %}">
					<img src="{{ product.image.url }}" class="card-img-top">
					</a>
				</div>
						<div class="card-body">
						<h5>{{ product.name }}</h5>
						</div>
						<ul class="list-group list-group-flush">
			 			<li class="list-group-item">{{ product.price }}</li>
			  			<li class="list-group-item">In stock: {{ product.quantity }}</li>
					</ul>
					<button type="submit" class="btn btn-primary">ADD TO BASKET</button>
				</div>
			</div>
			{% endif %}
			{% endfor %}
		</div>
	</div>
	<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>
	{% else %}
	<p>There are currently no products to show, please come back later!</p>
	{% endif %}
{% endblock %}